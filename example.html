<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/objy/dist/browser.js"></script>
    <script src="dist/mappers/storage.local.js"></script>
    <script>
    //console.log(OBJY)
    var mapper = new LocalMapper(OBJY);

    mapper.createClient('default', () => {})
    OBJY.client('local');

    OBJY.define({
        name: "object",
        pluralName: "objects",
        storage: new LocalMapper(OBJY).useConnection(mapper.getConnection())
    })

    OBJY.define({
        name: "user",
        pluralName: "users",
        storage: new LocalMapper(OBJY).useConnection(mapper.getConnection())
    })

    OBJY.object({ name: "otest", inherits: ["5f087f3e12f29a0012b346be"] }).add(obj => {
        console.log('obj', obj);
    }, (err) => {
        console.log(err)
    });

    OBJY.user({ name: "utest" }).add(obj => {
        console.log('obj', obj);
    }, (err) => {
        console.log(err)
    });


    OBJY.objects({"inherits":{"$in":["5f087f3e12f29a0012b346be"]}}).get(function(data) {
        console.log('got data:', data)
    }, function(err) {
        console.log('err:', err)
    })
    </script>
</head>

<body>
</body>

</html>